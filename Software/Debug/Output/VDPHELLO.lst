              	; --------------------------------------
              	; zasm: assemble "VDPHELLO.asm"
              	; date: 2024-09-01 18:43:43
              	; --------------------------------------


              	;
              	;**************************************************************
              	;*
              	;*               V D P   H E L L O   P R O G R A M
              	;*
              	;*    The VDP says hello! Expects VDP to be setup for CP/M
              	;*    console mode.
              	;* 
              	;**************************************************************
              	
00BE:         	nabu_vdp_data	equ	0xBE	; VDP Data Port
00BF:         	nabu_vdp_addr	equ	0xBF	; VDP Address Port
              	
              	
              	; Program start
0000:         		org	0x0000
              		
              		; Print "hello" message
0000:         	start:	
0000: 3E42    		ld	a,0x42
0002: 013412  		ld	bc,0x1234
0005: 24      		inc	h
0006: 2C      		inc	l
0007: F3      		di
0008: 0669    		ld	b,0x69
000A: D3FF    		out	(0xFF),a
000C: 3C      		inc	a
000D: 04      		inc	b
000E: 0C      		inc	c
000F: 14      		inc	d
0010: 1C      		inc	e
0011: 24      		inc	h
0012: 2C      		inc	l
0013: 31FFFF  		ld	sp,0xFFFF
              		
0016: 213401  		ld	hl,tms_foobar
0019: AF      		xor	a
001A: 77      	69$:	ld	(hl),a
001B: 23      		inc	hl
001C: 3C      		inc	a
001D: C21A00  		jp	nz,69$
              		
              		
              	
              		; Set up write address
0020: 010048  		ld	bc,0x4800
0023: CD3B00  		call	tms_addr
              		
              		; Write it in!
0026: 214400  		ld	hl,tms_hello
0029: 01C003  		ld	bc,24*40
002C: 7E      	0$:	ld	a,(hl)
002D: D3BE    		out	(nabu_vdp_data),a
002F: F5      		push	af
0030: F1      		pop	af
0031: 0B      		dec	bc
0032: 23      		inc	hl
0033: 78      		ld	a,b
0034: B1      		or	c
0035: C22C00  		jp	nz,0$
0038: C33800  	1$:	jp	1$
              	
              	
              	
              	
003B:         	tms_addr:
003B: DBBF    		in	a,(nabu_vdp_addr)
003D: 79      		ld	a,c
003E: D3BF    		out	(nabu_vdp_addr),a
0040: 78      		ld	a,b
0041: D3BF    		out	(nabu_vdp_addr),a
0043: C9      		ret
              		
              	
              	; Hello message	
0044:         	tms_hello:
0044: 48454C4C		defb	'H','E','L','L','O','!',0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0048: 4F212020	
004C: 20202020	
0050: 20...   	
006C: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0070: 20...   	
0094: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0098: 20...   	
00BC: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
00C0: 20...   	
00E4: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
00E8: 20...   	
010C: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0110: 20...   	
0134:         	tms_foobar:
0134: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0138: 20...   	
015C: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0160: 20...   	
0184: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0188: 20...   	
01AC: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
01B0: 20...   	
01D4: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
01D8: 20...   	
01FC: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0200: 20...   	
0224: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0228: 20...   	
024C: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0250: 20...   	
0274: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0278: 20...   	
029C: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
02A0: 20...   	
02C4: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
02C8: 20...   	
02EC: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
02F0: 20...   	
0314: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0318: 20...   	
033C: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0340: 20...   	
0364: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0368: 20...   	
038C: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0390: 20...   	
03B4: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
03B8: 20...   	
03DC: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,':','3'
03E0: 20202020	
03E4: 20202020	
03E8: 20202020	
03EC: 20202020	
03F0: 20202020	
03F4: 20202020	
03F8: 20202020	
03FC: 20202020	
0400: 20203A33	
              		
              		
              	;	.org	0x7000
              	;	ld	a,0x42
              	;	ld	bc,0x1234
              	;	inc	h
              	;	inc	l
              	;	di
              	;	ld	b,0x69
              	;	out	(0xFF),a
              	;	inc	a
              	;	inc	b
              	;	inc	c
              	;	inc	d
              	;	inc	e
              	;	inc	h
              	;	inc	l
              	;	ld	sp,0xB004


; +++ segments +++

#CODE          = $0000 =     0,  size = $0404 =  1028

; +++ global symbols +++

_end          = $0404 =  1028          VDPHELLO.asm:16 (unused)
_size         = $0404 =  1028          VDPHELLO.asm:16 (unused)
nabu_vdp_addr = $00BF =   191          VDPHELLO.asm:12
nabu_vdp_data = $00BE =   190          VDPHELLO.asm:11
start         = $0000 =     0          VDPHELLO.asm:19 (unused)
tms_addr      = $003B =    59          VDPHELLO.asm:66
tms_foobar    = $0134 =   308          VDPHELLO.asm:83
tms_hello     = $0044 =    68          VDPHELLO.asm:76


total time: 0.0034 sec.
no errors
