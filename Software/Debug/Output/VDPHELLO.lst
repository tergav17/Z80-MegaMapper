              	; --------------------------------------
              	; zasm: assemble "VDPHELLO.asm"
              	; date: 2024-08-28 23:33:39
              	; --------------------------------------


              	;
              	;**************************************************************
              	;*
              	;*               V D P   H E L L O   P R O G R A M
              	;*
              	;*    The VDP says hello! Expects VDP to be setup for CP/M
              	;*    console mode.
              	;* 
              	;**************************************************************
              	
00BE:         	nabu_vdp_data	equ	0xBE	; VDP Data Port
00BF:         	nabu_vdp_addr	equ	0xBF	; VDP Address Port
              	
              	
              	; Program start
0000:         		org	0x0000
              		
              		; Print "hello" message
0000:         	start:	
0000: 3E42    		ld	a,0x42
0002: 013412  		ld	bc,0x1234
0005: 24      		inc	h
0006: 2C      		inc	l
0007: F3      		di
0008: 0669    		ld	b,0x69
000A: D3FF    		out	(0xFF),a
000C: 3C      		inc	a
000D: 04      		inc	b
000E: 0C      		inc	c
000F: 14      		inc	d
0010: 1C      		inc	e
0011: 24      		inc	h
0012: 2C      		inc	l
0013: 31FFFF  		ld	sp,0xFFFF
              	
              		; Set up write address
0016: 010048  		ld	bc,0x4800
0019: CD3100  		call	tms_addr
              		
              		; Write it in!
001C: 213A00  		ld	hl,tms_hello
001F: 01C003  		ld	bc,24*40
0022: 7E      	0$:	ld	a,(hl)
0023: D3BE    		out	(nabu_vdp_data),a
0025: F5      		push	af
0026: F1      		pop	af
0027: 0B      		dec	bc
0028: 23      		inc	hl
0029: 78      		ld	a,b
002A: B1      		or	c
002B: C22200  		jp	nz,0$
002E: C32E00  	1$:	jp	1$
              	
              	
              	
              	
0031:         	tms_addr:
0031: DBBF    		in	a,(nabu_vdp_addr)
0033: 79      		ld	a,c
0034: D3BF    		out	(nabu_vdp_addr),a
0036: 78      		ld	a,b
0037: D3BF    		out	(nabu_vdp_addr),a
0039: C9      		ret
              		
              	
              	; Hello message	
003A:         	tms_hello:
003A: 48454C4C		defb	'H','E','L','L','O','!',0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
003E: 4F212020	
0042: 20202020	
0046: 20...   	
0062: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0066: 20...   	
008A: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
008E: 20...   	
00B2: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
00B6: 20...   	
00DA: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
00DE: 20...   	
0102: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0106: 20...   	
012A: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
012E: 20...   	
0152: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0156: 20...   	
017A: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
017E: 20...   	
01A2: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
01A6: 20...   	
01CA: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
01CE: 20...   	
01F2: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
01F6: 20...   	
021A: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
021E: 20...   	
0242: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0246: 20...   	
026A: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
026E: 20...   	
0292: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0296: 20...   	
02BA: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
02BE: 20...   	
02E2: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
02E6: 20...   	
030A: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
030E: 20...   	
0332: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0336: 20...   	
035A: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
035E: 20...   	
0382: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
0386: 20...   	
03AA: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20
03AE: 20...   	
03D2: 20202020		defb	0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,0x20,':','3'
03D6: 20202020	
03DA: 20202020	
03DE: 20202020	
03E2: 20202020	
03E6: 20202020	
03EA: 20202020	
03EE: 20202020	
03F2: 20202020	
03F6: 20203A33	
              		
              		
              	;	.org	0x7000
              	;	ld	a,0x42
              	;	ld	bc,0x1234
              	;	inc	h
              	;	inc	l
              	;	di
              	;	ld	b,0x69
              	;	out	(0xFF),a
              	;	inc	a
              	;	inc	b
              	;	inc	c
              	;	inc	d
              	;	inc	e
              	;	inc	h
              	;	inc	l
              	;	ld	sp,0xB004


; +++ segments +++

#CODE          = $0000 =     0,  size = $03FA =  1018

; +++ global symbols +++

_end          = $03FA =  1018          VDPHELLO.asm:16 (unused)
_size         = $03FA =  1018          VDPHELLO.asm:16 (unused)
nabu_vdp_addr = $00BF =   191          VDPHELLO.asm:12
nabu_vdp_data = $00BE =   190          VDPHELLO.asm:11
start         = $0000 =     0          VDPHELLO.asm:19 (unused)
tms_addr      = $0031 =    49          VDPHELLO.asm:57
tms_hello     = $003A =    58          VDPHELLO.asm:67


total time: 0.0024 sec.
no errors
